theme: dracula
theme_colors:
  accent: "#ff79c6"

typos:
  ai:
    model: anthropic/claude-sonnet-4-20250514

agents:
  explore:
    model: "anthropic/claude-sonnet-4-20250514"
  librarian:
    model: "anthropic/claude-sonnet-4-20250514"

pre-commit:
  parallel: false  # fmt must run first to auto-fix before clippy checks
  commands:
    - name: fmt
      # Auto-format staged .rs files and re-stage them
      run: |
        staged=$(git diff --cached --name-only --diff-filter=ACM | grep '\.rs$' || true)
        [ -z "$staged" ] && exit 0
        echo "$staged" | xargs cargo fmt --
        echo "$staged" | xargs git add
    - name: clippy
      run: cargo clippy -- -D warnings
    - name: diagnostics
      run: ./target/debug/uira diagnostics --staged --severity error
    - name: typos
      run: ./target/debug/uira typos --ai --staged --stage

post-commit:
  parallel: false
  commands:
    - name: auto-push
      run: git push origin HEAD
